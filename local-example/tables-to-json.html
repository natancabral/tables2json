<!DOCTYPE HTML>
<html>

<head>
  <title>
    How to convert JSON data to a
    html table using JavaScript ?
  </title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
  </script>
</head>

<body style="text-align:center;" id="body">

  <h1 style="color:green;">
    GeeksForGeeks
  </h1>

  <p id="GFG_UP" style="font-size: 15px; font-weight: bold;">
  </p>

  <button onclick="constructTable('#table')">
    click here
  </button>

  <br><br>

  <table align="center" id="table" border="1">
  </table>

  <table id="table1" border="1" align="center">
    <thead>
      <tr><th>col_1</th><th>col_3</th><th>col_2</th></tr>
    </thead>
    <tbody>
      <tr><td>val_11</td><td>val_13</td><td></td></tr><tr><td></td><td>val_23</td><td>val_22</td></tr><tr><td>val_31</td><td>val_33</td><td></td></tr>
    </tbody>
  </table>

  <table id="table2" border="1" align="center">
    <tr><th>col_1</th><th>col_3</th><th>col_2</th></tr>
    <tr><td>val_11</td><td>val_13</td><td></td></tr><tr><td></td><td>val_23</td><td>val_22</td></tr><tr><td>val_31</td><td>val_33</td><td></td></tr>
  </table>

  <script>

    function t2j( element ){

      let head = [];
      let data = [];

    const table = element;
    const rows = table.rows.length;
      let cells = 0;
      let text = '';

    for( var r = 0; r < rows; r++ ){
      cells || (cells = table.rows[0].cells.length);
      let simpleRow = [];
      for( var c = 0; c < cells; c++ ){
        text = table.rows[r].cells[c].textContent;
        if( r === 0 ) {
          head.push(text);
        }else {
          simpleRow.push(text);
        }
      }
      simpleRow.length && data.push(simpleRow);
    }

    return {
      headers: head,
      datas: [],
      rows: data,
    };

    // console.log(head, data);
    // console.log(table.rows);
    // console.log(table.rows.length);
    // console.log(table.rows[0].cells);
    // console.log(table.rows[0].cells[0].textContent);
    // console.log(table.rows[0].cells[0].cellIndex);
    // console.log(table.rows[0].innerHTML);

    }


    function tableToJson( idElement ){
      return t2j(document.getElementById(idElement));
    }

    function allTablesToJson(){  
      
        let all = [];

      const table = document.getElementsByTagName('table');
      const rows = table.length;
        let cells = 0;
        let text = '';

      for( var r = 0; r < rows; r++ ){
        all.push( t2j(table[r]) );
      }

      return all;

    }

    // tableToJson('table1');
    // allTablesToJson();

  </script>

  <script>
    var el_up = document.getElementById("GFG_UP");

    var list = [
      { "col_1": "val_11", "col_3": "val_13" },
      { "col_2": "val_22", "col_3": "val_23" },
      { "col_1": "val_31", "col_3": "val_33" }
    ];

    el_up.innerHTML = "Click on the button to create "
      + "the table from the JSON data.<br><br>"
      + JSON.stringify(list[0]) + "<br>"
      + JSON.stringify(list[1]) + "<br>"
      + JSON.stringify(list[2]);

    function constructTable(selector) {

      // Getting the all column names
      var cols = Headers(list, selector);

      // Traversing the JSON data
      for (var i = 0; i < list.length; i++) {
        var row = $('<tr/>');
        for (var colIndex = 0; colIndex < cols.length; colIndex++) {
          var val = list[i][cols[colIndex]];

          // If there is any key, which is matching
          // with the column name
          if (val == null) val = "";
          row.append($('<td/>').html(val));
        }

        // Adding each row to the table
        $(selector).append(row);
      }
    }

    function Headers(list, selector) {
      var columns = [];
      var header = $('<tr/>');

      for (var i = 0; i < list.length; i++) {
        var row = list[i];

        for (var k in row) {
          if ($.inArray(k, columns) == -1) {
            columns.push(k);

            // Creating the header
            header.append($('<th/>').html(k));
          }
        }
      }

      // Appending the header to the table
      $(selector).append(header);
      return columns;
    }
  </script>
</body>

</html>